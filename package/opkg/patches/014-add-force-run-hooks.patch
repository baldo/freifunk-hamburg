--- a/libopkg/opkg_conf.c
+++ b/libopkg/opkg_conf.c
@@ -54,6 +54,7 @@ opkg_option_t options[] = {
 	  { "force_reinstall", OPKG_OPT_TYPE_BOOL, &_conf.force_reinstall },
 	  { "force_space", OPKG_OPT_TYPE_BOOL, &_conf.force_space },
           { "check_signature", OPKG_OPT_TYPE_BOOL, &_conf.check_signature }, 
+	  { "force_run_hooks", OPKG_OPT_TYPE_BOOL, &_conf.force_run_hooks },
 	  { "ftp_proxy", OPKG_OPT_TYPE_STRING, &_conf.ftp_proxy },
 	  { "http_proxy", OPKG_OPT_TYPE_STRING, &_conf.http_proxy },
 	  { "no_proxy", OPKG_OPT_TYPE_STRING, &_conf.no_proxy },
--- a/libopkg/opkg_conf.h
+++ b/libopkg/opkg_conf.h
@@ -73,6 +73,7 @@ struct opkg_conf
      int force_space;
      int force_removal_of_dependent_packages;
      int force_removal_of_essential_packages;
+     int force_run_hooks;
      int check_signature;
      int nodeps; /* do not follow dependencies */
      char *offline_root;
--- a/libopkg/pkg.c
+++ b/libopkg/pkg.c
@@ -1249,7 +1249,7 @@ pkg_run_script(pkg_t *pkg, const char *s
 
      /* XXX: FEATURE: When conf->offline_root is set, we should run the
 	maintainer script within a chroot environment. */
-     if (conf->offline_root) {
+     if (conf->offline_root && !conf->force_run_hooks) {
           opkg_msg(INFO, "Offline root mode: not running %s.%s.\n",
 			  pkg->name, script);
 	  return 0;
--- a/src/opkg-cl.c
+++ b/src/opkg-cl.c
@@ -39,6 +39,7 @@ enum {
 	ARGS_OPT_FORCE_REMOVAL_OF_DEPENDENT_PACKAGES,
 	ARGS_OPT_FORCE_REMOVAL_OF_ESSENTIAL_PACKAGES,
 	ARGS_OPT_FORCE_SPACE,
+	ARGS_OPT_FORCE_RUN_HOOKS,
 	ARGS_OPT_NOACTION,
 	ARGS_OPT_DOWNLOAD_ONLY,
 	ARGS_OPT_NODEPS,
@@ -74,6 +75,8 @@ static struct option long_options[] = {
 		ARGS_OPT_FORCE_REMOVAL_OF_ESSENTIAL_PACKAGES},
 	{"force_removal_of_essential_packages", 0, 0,
 		ARGS_OPT_FORCE_REMOVAL_OF_ESSENTIAL_PACKAGES},
+	{"force-run-hooks", 0, 0, ARGS_OPT_FORCE_RUN_HOOKS},
+	{"force_run_hooks", 0, 0, ARGS_OPT_FORCE_RUN_HOOKS},
 	{"noaction", 0, 0, ARGS_OPT_NOACTION},
 	{"download-only", 0, 0, ARGS_OPT_DOWNLOAD_ONLY},
 	{"nodeps", 0, 0, ARGS_OPT_NODEPS},
@@ -153,6 +156,9 @@ args_parse(int argc, char *argv[])
 		case ARGS_OPT_FORCE_SPACE:
 			conf->force_space = 1;
 			break;
+		case ARGS_OPT_FORCE_RUN_HOOKS:
+			conf->force_run_hooks = 1;
+			break;
 		case ARGS_OPT_NODEPS:
 			conf->nodeps = 1;
 			break;
@@ -242,6 +248,7 @@ usage()
 	printf("\t--force-overwrite	Overwrite files from other package(s)\n");
 	printf("\t--force-downgrade	Allow opkg to downgrade packages\n");
 	printf("\t--force-space		Disable free space checks\n");
+	printf("\t--force-run-hooks	Run postinstall scripts even in offline mode\n");
 	printf("\t--noaction		No action -- test only\n");
 	printf("\t--download-only	No action -- download only\n");
 	printf("\t--nodeps		Do not follow dependencies\n");
